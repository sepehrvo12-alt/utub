<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ£ÛŒÛŒØ¯ Ø³Ø§Ø¨Ø³Ú©Ø±Ø§ÛŒØ¨ | UTub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <style>
        body {
            background: #0f172a; color: white; font-family: Tahoma, sans-serif;
            height: 100vh; display: flex; align-items: center; justify-content: center;
        }
        .dl-card {
            background: rgba(30, 41, 59, 0.7); border: 1px solid #38bdf8;
            padding: 40px; border-radius: 25px; backdrop-filter: blur(10px);
            max-width: 450px; width: 90%; text-align: center;
        }
        .btn-action {
            width: 100%; padding: 15px; border-radius: 12px; font-weight: bold;
            text-decoration: none; display: block; transition: 0.3s; margin-top: 15px;
        }
        .btn-sub { background: #ef4444; color: white; }
        .btn-sub:hover { background: #dc2626; transform: scale(1.02); color: white; }
        .btn-download { background: #10b981; color: white; display: none; }
        #timer { color: #38bdf8; font-size: 0.9rem; margin-top: 10px; display: none; }
        .step { font-size: 0.8rem; color: #94a3b8; margin-bottom: 5px; }
    </style>
</head>
<body>

<div class="dl-card shadow-lg">
    <h3 class="mb-4">ğŸ”’ Ù…Ø­ØªÙˆØ§ÛŒ Ù‚ÙÙ„ Ø´Ø¯Ù‡</h3>
    <p class="mb-4" style="font-size: 0.95rem;">Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù„ÛŒÙ†Ú© Ø¯Ø§Ù†Ù„ÙˆØ¯ØŒ Ø¨Ø§ÛŒØ¯ Ø§Ø² Ú©Ø§Ù†Ø§Ù„ Ø­Ù…Ø§ÛŒØª Ú©Ù†ÛŒØ¯.</p>

    <div class="text-end">
        <div class="step">Ù…Ø±Ø­Ù„Ù‡ Ø§ÙˆÙ„:</div>
        <a href="#" id="subBtn" target="_blank" class="btn-action btn-sub" onclick="startVerification()">Ø³Ø§Ø¨Ø³Ú©Ø±Ø§ÛŒØ¨ Ú©Ø§Ù†Ø§Ù„ ÛŒÙˆØªÛŒÙˆØ¨</a>
        <div id="timer">Ù„Ø·ÙØ§Ù‹ <span id="seconds">10</span> Ø«Ø§Ù†ÛŒÙ‡ Ø¯Ø± Ú©Ø§Ù†Ø§Ù„ Ø¨Ù…Ø§Ù†ÛŒØ¯...</div>
    </div>

    <div class="text-end mt-4">
        <div class="step" id="step2-text" style="opacity: 0.5;">Ù…Ø±Ø­Ù„Ù‡ Ø¯ÙˆÙ…:</div>
        <a href="#" id="dlBtn" class="btn-action btn-download">Ø¯Ø±ÛŒØ§ÙØª ÙØ§ÛŒÙ„ Ù†Ù‡Ø§ÛŒÛŒ</a>
    </div>
</div>

<script>
    // Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ø² Ø¢Ø¯Ø±Ø³ Ø³Ø§ÛŒØª
    const urlParams = new URLSearchParams(window.location.search);
    const encodedData = urlParams.get('id');
    
    if (encodedData) {
        try {
            const decodedData = JSON.parse(decodeURIComponent(escape(atob(encodedData))));
            document.getElementById('subBtn').href = decodedData.yt;
            document.getElementById('dlBtn').href = decodedData.file;
        } catch (e) {
            alert("Ø®Ø·Ø§ Ø¯Ø± Ø®ÙˆØ§Ù†Ø¯Ù† Ù„ÛŒÙ†Ú©!");
        }
    }

    function startVerification() {
        const timerDiv = document.getElementById('timer');
        const secondsSpan = document.getElementById('seconds');
        const dlBtn = document.getElementById('dlBtn');
        const step2 = document.getElementById('step2-text');
        
        timerDiv.style.display = 'block';
        let timeLeft = 8; // Ù…Ø¯Øª Ø²Ù…Ø§Ù† Ø§Ù†ØªØ¸Ø§Ø± (Ø«Ø§Ù†ÛŒÙ‡)

        const interval = setInterval(() => {
            timeLeft--;
            secondsSpan.innerText = timeLeft;

            if (timeLeft <= 0) {
                clearInterval(interval);
                timerDiv.innerText = "âœ… ØªØ§ÛŒÛŒØ¯ Ø´Ø¯! Ø­Ø§Ù„Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ú©Ù†ÛŒØ¯.";
                dlBtn.style.display = 'block';
                step2.style.opacity = "1";
                document.getElementById('subBtn').style.opacity = "0.5";
                document.getElementById('subBtn').innerText = "Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯";
            }
        }, 1000);
    }
</script>

</body>
</html>
